{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Food Market</title>

	<link rel="stylesheet" href="{% static '/css/styles.css' %}" />
	<link rel="stylesheet" href="{% static '/css/stock.css' %}" />

</head>

<body class="stockBody">

	<header>
		<img class="logo" src="{% static '/images/Logo/cover.png' %}" alt="" />
	</header>

	<table id="scrollStock">
		<tr>
			<th>Drink Type</th>
			<th>Drink Name</th>
			<th>Current Price</th>
			<th>Total Quantity</th>
			<th>Actual Price</th>
			<th>Savings</th>
			<th>Low</th>
			<th>High</th>
		</tr>

		{% for drink in all_drinks %}

		<tr>
			<td>{{drink.drinktype}}</td>
			<td>{{drink.name}}</td>
			<td class="{{drink.className}}">₹ {{drink.current_price}}</td>
			<td>{{drink.tot_qty}}</td>
			<td>₹ {{drink.actual_price}}</td>
			<td>{{drink.savings}}</td>
			<td>₹ {{drink.low}}</td>
			<td>₹ {{drink.high}}</td>
		</tr>

		{% endfor %}

		{% for drink in all_drinks %}

		<tr>
			<td>{{drink.drinktype}}</td>
			<td>{{drink.name}}</td>
			<td class="{{drink.className}}">₹ {{drink.current_price}}</td>
			<td>{{drink.tot_qty}}</td>
			<td>₹ {{drink.actual_price}}</td>
			<td>{{drink.savings}}</td>
			<td>₹ {{drink.low}}</td>
			<td>₹ {{drink.high}}</td>
		</tr>

		{% endfor %}

		{% for drink in all_drinks %}

		<tr>
			<td>{{drink.drinktype}}</td>
			<td>{{drink.name}}</td>
			<td class="{{drink.className}}">₹ {{drink.current_price}}</td>
			<td>{{drink.tot_qty}}</td>
			<td>₹ {{drink.actual_price}}</td>
			<td>{{drink.savings}}</td>
			<td>₹ {{drink.low}}</td>
			<td>₹ {{drink.high}}</td>
		</tr>

		{% endfor %}

	</table>

	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

	<script>
		var scrollStock = document.getElementById("scrollStock");

		function scrollpage() {
			function f() {
				scrollStock.scrollTo(0, i);
				if (status == 0) {
					i = i + 0.2;
					if (i >= Height) {
						status = 1;
					}
				} else {
					scrollStock.scrollTo(0, 0);
					i = 0;
					status = 0;
				}
				setTimeout(f, 0.0001);
			}
			setTimeout(f, 2000);
		}

		var Height = scrollStock.offsetHeight + 40;
		var i = 1, j = Height, status = 0;
		scrollpage();
	</script>

	<script>
		var scrollStock = document.getElementById("scrollStock");

		function getPage() {
			scrollStock.innerHTML = `
				<tr>
					<th>Drink Type</th>
					<th>Drink Name</th>
					<th>Current Price</th>
					<th>Total Quantity</th>
					<th>Actual Price</th>
					<th>Savings</th>
					<th>Low</th>
					<th>High</th>
				</tr>
			`
			fetch("{% url 'web:stock_load_ajax' %}")
				.then(e => e.json()).then(allorder => {
					for (order of allorder) {
						scrollStock.innerHTML += `
							<tr>
								<td>${order.fields.drinktype}</td>
								<td>${order.fields.name}</td>
								<td class="${order.fields.className}">₹ ${order.fields.current_price}</td>
								<td>${order.fields.tot_qty}</td>
								<td>₹ ${order.fields.actual_price}</td>
								<td>${order.fields.savings}</td>
								<td>₹ ${order.fields.low}</td>
								<td>₹ ${order.fields.high}</td>
							</tr>
						`
					}

					for (order of allorder) {
						scrollStock.innerHTML += `
							<tr>
								<td>${order.fields.drinktype}</td>
								<td>${order.fields.name}</td>
								<td class="${order.fields.className}">₹ ${order.fields.current_price}</td>
								<td>${order.fields.tot_qty}</td>
								<td>₹ ${order.fields.actual_price}</td>
								<td>${order.fields.savings}</td>
								<td>₹ ${order.fields.low}</td>
								<td>₹ ${order.fields.high}</td>
							</tr>
						`
					}
				})
		}

		setInterval(getPage, 2000);
	</script>

</body>

</html>